name: Discord Notifications

on:
  push:
    branches: [ "main", "master", "develop" ]
  pull_request:
    types: [opened, closed, reopened]

permissions:
  contents: read
  pull-requests: read

jobs:
  push-notify:
    if: github.event_name == 'push'
    runs-on: ubuntu-latest
    steps:
    - name: Push Notification
      uses: sarisia/actions-status-discord@v1
      with:
        webhook: ${{ secrets.DISCORD_WEBHOOK }}
        nocontext: true
        title: "ğŸ“¤ Push to `${{ github.ref_name }}`"
        description: |
          **ì»¤ë°‹ ë©”ì‹œì§€**: ${{ github.event.head_commit.message }}
          **ì»¤ë°‹**: `${{ github.sha }}`
          **ì‘ì„±ì**: ${{ github.actor }}
        color: 0x7289DA

  pr-opened:
    if: github.event_name == 'pull_request' && github.event.action == 'opened'
    runs-on: ubuntu-latest
    steps:
    - name: PR Opened Notification
      uses: sarisia/actions-status-discord@v1
      with:
        webhook: ${{ secrets.DISCORD_WEBHOOK }}
        nocontext: true
        title: "ğŸ”” ìƒˆ PR ìƒì„±"
        description: |
          **ì œëª©**: ${{ github.event.pull_request.title }}
          **ì‘ì„±ì**: ${{ github.event.pull_request.user.login }}
          **ë¸Œëœì¹˜**: `${{ github.head_ref }}` â†’ `${{ github.base_ref }}`
          **ë§í¬**: ${{ github.event.pull_request.html_url }}
        color: 0xFFA500

  pr-merged:
    if: github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
    - name: PR Merged Notification
      uses: sarisia/actions-status-discord@v1
      with:
        webhook: ${{ secrets.DISCORD_WEBHOOK }}
        nocontext: true
        title: "ğŸ‰ PR ë¨¸ì§€ ì™„ë£Œ!"
        description: |
          **ì œëª©**: ${{ github.event.pull_request.title }}
          **ì‘ì„±ì**: ${{ github.event.pull_request.user.login }}
          **ë¸Œëœì¹˜**: `${{ github.head_ref }}` â†’ `${{ github.base_ref }}`
        color: 0x00FF00

  pr-closed:
    if: github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == false
    runs-on: ubuntu-latest
    steps:
    - name: PR Closed Notification
      uses: sarisia/actions-status-discord@v1
      with:
        webhook: ${{ secrets.DISCORD_WEBHOOK }}
        nocontext: true
        title: "ğŸš« PR ë‹«í˜ (ë¨¸ì§€ ì•ˆë¨)"
        description: |
          **ì œëª©**: ${{ github.event.pull_request.title }}
          **ì‘ì„±ì**: ${{ github.event.pull_request.user.login }}
        color: 0xFF0000
